<html>

<head>
<title>FMJS</title>
<script type="text/javascript" src="./src/fm.js"></script>
<script src="https://rawgit.com/Matooy/codesnapjs/master/src/codesnap.js"></script>

<link rel="stylesheet" href="./asset/extra/prism/prism.css">
<script type="text/javascript" src="./asset/extra/prism/prism.js" data-default-language="javascript"></script>

<style>

body {
  font-family: Geogia;
}

h1 {
  font-size: 3.2em;
}

#content {
  width: 60%;
  min-width: 800px;
  margin: auto;
}

pre>code {
  font-size: .9em;
}

#codesnap-index {
  margin-bottom: 1em;
  display: table;
}

.codesnap-index-anchor {
  margin: 4px;
  color: #555;
  display: inline-block;
  text-decoration: none;
  border: 1px solid #ccc;
    padding: .1em .4em;
}
.index-row {
  display: table-row;
}
.index-caption {
  display: table-cell;
  min-width: 80px;
}
.index-content {
  display: table-cell;
}

.codesnap-container {
  margin-bottom: 2em;
}

.codesnap-title {
  font-size: 2em;
  margin-bottom: .2em;
}

.codesnap-result {
  border: 1px solid #ccc;
}

.codesnap-result-caption {
  border-top: 1px dashed #ccc;
  padding-top: .1em;
  color: #aaa;
}

li {
}
  li>span:first-of-type {
    font-weight: bold;
  }
  li>span{
    font-family: monospace;
    display: inline-block;
  }

</style>

</head>

<body>

<div id="content" class="language-javascript">
  <h1>FMJS</h1>
  <p>A Collection of tiny helpers. "Functions by Matooy for JavaScript"</p>
  <p>All functions is contained specific namespaces.</p>
  <ul>
    <li>
      <span>vr.</span>
      <span>variable</span>
    </li>
    <li>
      <span>ob.</span>
      <span>object</span>
    </li>
    <li>
      <span>ar.</span>
      <span>array</span>
    </li>
    <li>
      <span>st.</span>
      <span>string</span>
    </li>
    <li>
      <span>fn.</span>
      <span>function</span>
    </li>
  </ul>
</div>

<script>

var files = [
  ['vr.type', {
    title: 'vr.type',
    description: "Return variable type as string."
  }],
  ['vr.empty', {
    title: 'vr.empty',
    description: "Check variable is empty."
  }],
  ['vr.is_f', {
    title: 'vr.is_f',
    description: "Check variable is function."
  }],
  ['vr.valid', {
    title: 'vr.valid',
    description: "Check variable's type is matched. In 2nd argument, array means available types list."
  }],
  ['vr.validall', {
    title: 'vr.validall',
    description: "Apply vr.valid() function to all arguments"
  }],
  ['ob.assign', {
    title: 'ob.assign',
    description: "Clone new property recursively."
  }],
  ['ob.merge', {
    title: "ob.merge",
    description: "Merge objects."
  }],
  ['ob.thaw', {
    title: 'ob.thaw',
    description: "Pick specific property as string"
  }],
  ['ob.absorb', {
    title: 'ob.absorb',
    description: "Apply fn.pack to a specific object."
  }],
  ['ob.diff', {
    title: 'ob.diff',
    description: "Find differences between twe objects"
  }],
  ['ar.repeat', {
    title: 'ar.repeat',
    description: "Fill array with specific value and length."
  }],
  ['ar.range', {
    title: 'ar.range',
    description: "Fill array with incremented integer"
  }],
  ['ar.clone', {
    title: 'ar.clone',
    description: "Clone array."
  }],
  ['ar.diff', {
    title: 'ar.diff',
    description: "Find differences among arrays."
  }],
  ['ar.intersect', {
    title: 'ar.intersect',
    description: "Intersect array"
  }],
  ['ar.has', {
    title: 'ar.has',
    description: "Check array has a value."
  }],
  ['ar.sort', {
    title: 'ar.sort',
    description: "Sort array with a callback. 'return false' will ignore element completely. 'return null' will put element at tail."
  }],
  ['st.repeat', {
    title: 'st.repeat',
    description: "Repeat string n times."
  }],
  ['st.fill', {
    title: 'st.fill',
    description: "Repeat string untill fill length n."
  }],
  ['st.pad', {
    title: 'st.pad',
    description: "Put padding string to string"
  }],
  ['st.sort', {
    title: 'st.sort',
    description: "Sort string chars."
  }],
  ['fn.pack', {
    title: "fn.pack",
    description: "Package named functions to object."
  }],
  ['fn.proxy', {
    title: "fn.proxy",
    description: "Did you know $.proxy ? I believe almost same as it. Instance binder."
  }],
  ['fn.partial', {
    title: "fn.partial",
    description: "Make a function partialized."
  }],
  ['fn.promise', {
    title: "fn.promise",
    description: "Return a FM_Promise object."
  }],
  ['fn.swear', {
    title: "fn.swear",
    description: "Observe many of FM_Promise. Similar to jQuery.when()."
  }],
  ['event.create', {
    title: 'event.create',
    description: "Create a new CustomEvent instance."
      + '<div>'
      + '<button id="button-create-event-A" class="button">Button A</button>'
      + '<button id="button-create-event-B" class="button">Button B</button>'
      + '</div>'
  }],
  ['event.bind', {
    title: 'event.bind',
    description: "Bind CustomEvent to a specific element."
  }],
  ['time.monitor', {
    title: 'time.monitor',
    description: "Validate state later and trigger callbacks. This may be convenient to observe event that triggered multiple times in a short term like as window.onresize."
  }],
  ['html.singletons', {
    title: 'html.singletons',
    description: "Returns singleton element names as array."
  }],
  ['html.escape_selector', {
    title: 'html.escape_selector',
    description: "Escape all chars in selector for DOMQuery"
  }],
];

var result;
var prevfile = null;
var prevgroup = null;

(new CodeSnap({
  wrapper: 'content',
  files: files,
  events: {
    before_load: function(){
      result = undefined;
    },
    loaded: function(f, src){
      var wrp = document.getElementById('codesnap-' +f.name);

      var res = document.createElement('pre');
      var res_cap = document.createElement('div');

      res.setAttribute('class', 'codesnap-result');
      res.innerHTML = JSON.stringify(result);

      res_cap.innerHTML = 'content of result variable';
      res_cap.setAttribute('class', 'codesnap-result-caption');

      wrp.appendChild(res_cap);
      wrp.appendChild(res);

      Prism.highlightElement(res);
      Prism.highlightElement(document.getElementById('codesnap-' +f.name+ '-code'));
    },
    indexed: function(wrap, anc, file){

      var pns = prevfile ? prevfile.name.split(".")[0] : null;
      var cns = file.name.split('.')[0];
      var row, cap;

      if(pns != cns){
        row = document.createElement('div');
          row.className = 'index-row';
        cap = document.createElement('div');
          cap.className = 'index-caption';
          cap.innerHTML = cns + '.';
        prevgroup = document.createElement('div');
          prevgroup.className = 'index-content';

        row.appendChild(cap);
        row.appendChild(prevgroup);
        wrap.appendChild(row);
      }

      prevfile = file;
      prevgroup.appendChild(anc);
    }
  }
}).load());
</script>
</body>

</html>
